<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROI Simulator - Weld Insight</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/roi-simulator.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-left">
            <a href="main.html" class="logo" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                <img src="assets/icons/rbw_logo.png" alt="RB-WARE" class="logo-image">
                <span>Weld Insight</span>
            </a>
        </div>
        <div class="nav-center">
            <div class="site-selector" id="siteSelectorDropdown">
                <span class="site-selector-text" id="selectedSite" data-i18n="nav.site.all">조선소 전체</span>
                <span class="site-selector-icon">▼</span>
                <div class="site-dropdown" id="siteDropdown">
                    <div class="site-option" data-value="all" data-i18n="nav.site.all">조선소 전체</div>
                    <div class="site-option" data-value="line1" data-i18n="nav.site.line1">1라인</div>
                    <div class="site-option" data-value="line2" data-i18n="nav.site.line2">2라인</div>
                    <div class="site-option" data-value="line3" data-i18n="nav.site.line3">3라인</div>
                </div>
            </div>
            <div class="live-indicator">
                <span class="live-dot"></span>
                <span class="live-text" data-i18n="nav.live">Live Now</span>
                <span class="live-count" id="liveCount">12,243</span>
                <span class="live-label" data-i18n="nav.live.label">welds today</span>
            </div>
        </div>
        <div class="nav-right">
            <div class="lang-selector">
                <button class="lang-option active" data-lang="en">EN</button>
                <button class="lang-option" data-lang="ko">한글</button>
                <button class="lang-option" data-lang="tr">TR</button>
            </div>
            <div class="date-picker" id="datePickerDropdown">
                <span>📅</span>
                <span class="date-picker-text" id="selectedDate" data-i18n="nav.date.30d">최근 30일</span>
                <span class="date-picker-icon">▼</span>
                <div class="date-dropdown" id="dateDropdown">
                    <div class="date-option" data-value="1d" data-i18n="nav.date.1d">최근 1일</div>
                    <div class="date-option" data-value="3d" data-i18n="nav.date.3d">최근 3일</div>
                    <div class="date-option" data-value="5d" data-i18n="nav.date.5d">최근 5일</div>
                    <div class="date-option" data-value="10d" data-i18n="nav.date.10d">최근 10일</div>
                    <div class="date-option" data-value="15d" data-i18n="nav.date.15d">최근 15일</div>
                    <div class="date-option" data-value="30d" data-i18n="nav.date.30d">최근 30일</div>
                </div>
            </div>
            <div class="user-profile" id="userProfileDropdown">
                <div class="user-avatar">
                    <img src="assets/icons/worker.png" alt="User" class="user-avatar-img">
                </div>
                <div class="user-dropdown" id="userDropdown">
                    <div class="user-dropdown-header">
                        <img src="assets/icons/worker.png" alt="User" class="user-dropdown-avatar">
                        <div class="user-dropdown-info">
                            <div class="user-dropdown-name">Can Berk Sansoy</div>
                            <div class="user-dropdown-email">admin@rbware.com</div>
                        </div>
                    </div>
                    <div class="user-dropdown-divider"></div>
                    <div class="user-dropdown-menu">
                        <div class="user-menu-item">
                            <span class="user-menu-icon">👤</span>
                            <span data-i18n="user.profile">프로필</span>
                        </div>
                        <div class="user-menu-item">
                            <span class="user-menu-icon">⚙️</span>
                            <span data-i18n="user.settings">설정</span>
                        </div>
                        <div class="user-menu-item">
                            <span class="user-menu-icon">🔔</span>
                            <span data-i18n="user.notifications">알림</span>
                        </div>
                        <div class="user-menu-item">
                            <span class="user-menu-icon">❓</span>
                            <span data-i18n="user.help">도움말</span>
                        </div>
                    </div>
                    <div class="user-dropdown-divider"></div>
                    <div class="user-menu-item logout">
                        <span class="user-menu-icon">🚪</span>
                        <span data-i18n="user.logout">로그아웃</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar">
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="main.html" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                    <span class="menu-icon">🏠</span>
                    <span data-i18n="menu.home">Home</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="dashboard.html" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                    <span class="menu-icon">⚡</span>
                    <span data-i18n="menu.dashboard">Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="live-operations.html" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                    <span class="menu-icon">⚡</span>
                    <span data-i18n="menu.operations">Live Operations</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="quality-guardian.html" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                    <span class="menu-icon">🛡️</span>
                    <span data-i18n="menu.quality">Quality Guardian</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="recipes-playbook.html" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                    <span class="menu-icon">📋</span>
                    <span data-i18n="menu.recipes">Recipes & Playbook</span>
                </a>
            </li>
            <li class="menu-item active">
                <a href="roi-simulator.html" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                    <span class="menu-icon">💰</span>
                    <span data-i18n="menu.roi">ROI Simulator</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                    <span class="menu-icon">🤖</span>
                    <span data-i18n="menu.fleet">Fleet View</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" style="display: flex; align-items: center; gap: var(--spacing-sm); color: inherit; text-decoration: none;">
                    <span class="menu-icon">🧠</span>
                    <span data-i18n="menu.ai">Data & AI Engine</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Header -->
        <div class="page-header-row">
            <div class="page-header">
                <h1 data-i18n="roi.title">ROI Simulator – RB-Connect 도입 효과 계산</h1>
                <p class="page-subtitle" data-i18n="roi.subtitle">현재 공장의 인력, 불량률, 재작업 비용을 바탕으로 RB-Connect 도입 시 연간 절감액과 투자 회수 기간을 보수적으로 추정합니다.</p>
            </div>
            <div class="disclaimer">
                <p data-i18n="roi.disclaimer">※ 실제 계약·견적 시에는 현장 데이터를 기반으로 별도 상세 산출서를 제공합니다.</p>
            </div>
        </div>

        <!-- Content Row 1: Inputs + Results -->
        <div class="content-row-1">
            <!-- Left Panel: Inputs -->
            <div class="inputs-card">
                <h2 class="card-title" data-i18n="roi.inputs.title">입력 값 (한 생산 라인 기준)</h2>

                <!-- Section A: Process/Line Info -->
                <div class="input-section">
                    <h3 class="section-title" data-i18n="roi.section.process">공정 / 라인 정보</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="processType" data-i18n="roi.label.processType">공정 유형 (Process Type)</label>
                            <select id="processType">
                                <option value="automotive" data-i18n="roi.process.automotive">자동차 차체 용접 (Automotive · Body shop)</option>
                                <option value="shipbuilding" data-i18n="roi.process.shipbuilding">조선 (Shipbuilding)</option>
                                <option value="heavy" data-i18n="roi.process.heavy">중장비 (Heavy Equipment)</option>
                                <option value="fabrication" data-i18n="roi.process.fabrication">일반 제조 (General Fabrication)</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="lineType" data-i18n="roi.label.lineType">라인 유형 (Line Type)</label>
                            <select id="lineType">
                                <option value="robot-assist" data-i18n="roi.line.robotAssist">로봇 + 보조 작업자 (Robot + manual assist)</option>
                                <option value="robot-only" data-i18n="roi.line.robotOnly">로봇 전용 (Robot only)</option>
                                <option value="manual" data-i18n="roi.line.manual">수동 작업 (Manual)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Section B: Labor/Cost -->
                <div class="input-section">
                    <h3 class="section-title" data-i18n="roi.section.labor">인력 / 인건비</h3>
                    <div class="input-grid two-column">
                        <div class="input-group">
                            <label for="currentWorkers" data-i18n="roi.label.currentWorkers">현재 투입 인원 (명)</label>
                            <input type="number" id="currentWorkers" value="2" min="0">
                        </div>
                        <div class="input-group">
                            <label for="afterWorkers" data-i18n="roi.label.afterWorkers">RB-Connect 도입 후 인원 (명)</label>
                            <input type="number" id="afterWorkers" value="1" min="0">
                        </div>
                        <div class="input-group">
                            <label for="workHours" data-i18n="roi.label.workHours">일 근무 시간 (시간/일)</label>
                            <input type="number" id="workHours" value="8" min="0">
                        </div>
                        <div class="input-group">
                            <label for="workDays" data-i18n="roi.label.workDays">연 근무 일수 (일/년)</label>
                            <input type="number" id="workDays" value="250" min="0">
                        </div>
                        <div class="input-group full-width">
                            <label for="laborCost" data-i18n="roi.label.laborCost">1인당 인건비 (원/시간)</label>
                            <input type="number" id="laborCost" value="25000" min="0">
                            <span class="input-hint" data-i18n="roi.label.laborCostHint">예: 시급 25,000원 ≈ 연 5,000만 원 수준</span>
                        </div>
                    </div>
                </div>

                <!-- Section C: Production/Defect/Rework -->
                <div class="input-section">
                    <h3 class="section-title" data-i18n="roi.section.production">생산량 / 불량 / 재작업 비용</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="dailyJobs" data-i18n="roi.label.dailyJobs">일 평균 용접 Job 수 (건/일)</label>
                            <input type="number" id="dailyJobs" value="1000" min="0">
                        </div>
                        <div class="input-group">
                            <label for="currentDefectRate" data-i18n="roi.label.currentDefectRate">현재 불량률 (%)</label>
                            <input type="number" id="currentDefectRate" value="2.0" step="0.1" min="0">
                        </div>
                        <div class="input-group">
                            <label for="afterDefectRate" data-i18n="roi.label.afterDefectRate">RB-Connect 도입 후 예상 불량률 (%)
                                <span class="tooltip" title="기본값은 실제 레퍼런스 평균 수준으로 설정되었습니다">ⓘ</span>
                            </label>
                            <input type="number" id="afterDefectRate" value="0.8" step="0.1" min="0">
                        </div>
                        <div class="input-group">
                            <label for="defectCost" data-i18n="roi.label.defectCost">불량 1건당 비용 (원)</label>
                            <input type="number" id="defectCost" value="30000" min="0">
                            <span class="input-hint" data-i18n="roi.label.defectCostHint">재료비 + 인건비 + 설비 점유 비용 포함 추정</span>
                        </div>
                    </div>
                </div>

                <!-- Section D: RB-Connect Cost -->
                <div class="input-section">
                    <h3 class="section-title" data-i18n="roi.section.cost">RB-Connect 비용</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="subscriptionCost" data-i18n="roi.label.subscriptionCost">구독료 (라인당 / 연)</label>
                            <input type="number" id="subscriptionCost" value="36000000" min="0">
                        </div>
                        <div class="input-group">
                            <label for="initialCost" data-i18n="roi.label.initialCost">초기 구축비 (1회성)</label>
                            <input type="number" id="initialCost" value="30000000" min="0">
                        </div>
                        <div class="input-group">
                            <label for="amortizationYears" data-i18n="roi.label.amortizationYears">초기 구축비 상각 기간 (년)
                                <span class="tooltip" title="초기 구축비는 선택한 기간 동안 나누어 연간 비용으로 환산합니다">ⓘ</span>
                            </label>
                            <input type="number" id="amortizationYears" value="3" min="1">
                        </div>
                    </div>
                </div>

                <button class="btn-calculate" id="btnCalculate" data-i18n="roi.btn.calculate">계산하기</button>
            </div>

            <!-- Right Panel: Results -->
            <div class="results-card">
                <div class="scenario-toggle">
                    <label data-i18n="roi.scenario.label">시나리오</label>
                    <div class="segmented-control">
                        <button class="segment-btn" data-scenario="conservative" data-i18n="roi.scenario.conservative">보수적 (Conservative)</button>
                        <button class="segment-btn active" data-scenario="base" data-i18n="roi.scenario.base">기본 (Base case)</button>
                        <button class="segment-btn" data-scenario="optimistic" data-i18n="roi.scenario.optimistic">낙관적 (Optimistic)</button>
                    </div>
                </div>

                <!-- KPI Cards -->
                <div class="kpi-cards">
                    <div class="kpi-card">
                        <h3 class="kpi-title" data-i18n="roi.kpi.totalSavings">연간 총 절감액 (Annual Gross Savings)</h3>
                        <div class="kpi-value success" id="totalSavings">₩ 145,000,000</div>
                        <div class="kpi-details">
                            <div class="kpi-detail-item">
                                <span class="detail-label" data-i18n="roi.kpi.laborSavings">· 인력 절감:</span>
                                <span class="detail-value" id="laborSavings">₩ 50,000,000</span>
                            </div>
                            <div class="kpi-detail-item">
                                <span class="detail-label" data-i18n="roi.kpi.defectSavings">· 불량·재작업 절감:</span>
                                <span class="detail-value" id="defectSavings">₩ 95,000,000</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <h3 class="kpi-title" data-i18n="roi.kpi.netBenefit">연간 순효과 (Annual Net Benefit)</h3>
                        <div class="kpi-value success" id="netBenefit">₩ 79,000,000</div>
                        <div class="kpi-details">
                            <p class="detail-caption" id="netBenefitCaption" data-i18n="roi.kpi.netBenefitCaption">연간 총 절감액 – RB-Connect 연간 비용</p>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <h3 class="kpi-title" data-i18n="roi.kpi.payback">예상 투자 회수 기간 (Payback)</h3>
                        <div class="kpi-value primary" id="payback">약 4.6 개월</div>
                        <div class="kpi-details">
                            <p class="detail-caption" id="roiPercent">ROI: 120% / year (Annual Net Benefit ÷ Annual Cost)</p>
                        </div>
                    </div>
                </div>

                <!-- Savings Breakdown Chart -->
                <div class="chart-card">
                    <h3 class="chart-title" data-i18n="roi.chart.title">Savings Breakdown</h3>
                    <div class="chart-container">
                        <canvas id="savingsChart"></canvas>
                    </div>
                </div>

                <div class="results-caption">
                    이 구성이 유지될 경우, RB-Connect는 약 5개월 내에 투자비를 상쇄하고 이후 1개 라인 기준 연간 약 8천만 원 수준의 순효과를 기대할 수 있습니다.
                </div>
            </div>
        </div>

        <!-- Content Row 2: Assumptions + Reference -->
        <div class="content-row-2">
            <!-- Left: Assumptions -->
            <div class="assumptions-card">
                <h2 class="card-title" data-i18n="roi.assumptions.title">모델 가정 (Assumptions)</h2>
                <ul class="assumptions-list">
                    <li data-i18n="roi.assumption1">한 개 생산 라인 기준으로 계산합니다. 동일 구조 라인이 여러 개일 경우, 결과에 라인 수를 곱하면 전체 효과를 볼 수 있습니다.</li>
                    <li data-i18n="roi.assumption2">불량 1건당 비용은 재료·인건비·설비 점유를 포함한 공장 내부 기준을 사용해야 가장 정확합니다.</li>
                    <li data-i18n="roi.assumption3">도입 후 불량률 개선 폭(2.0% → 0.8%)과 인력 절감(2명 → 1명)은 실제 RB-Connect 레퍼런스 평균 수준 가정입니다.</li>
                    <li data-i18n="roi.assumption4">보수적 시나리오에서는 개선 폭을 50% 수준으로 줄여 계산합니다.</li>
                </ul>
            </div>

            <!-- Right: Reference Case -->
            <div class="reference-card">
                <h2 class="card-title" data-i18n="roi.reference.title">참고 사례 (Base Case 예시)</h2>
                <div class="reference-content">
                    <div class="reference-item">
                        <span class="ref-label" data-i18n="roi.reference.factoryType">공장 유형:</span>
                        <span class="ref-value" data-i18n="roi.reference.factoryValue">자동차 차체 용접 라인</span>
                    </div>
                    <div class="reference-item">
                        <span class="ref-label" data-i18n="roi.reference.lineSetup">라인 구성:</span>
                        <span class="ref-value" data-i18n="roi.reference.lineSetupValue">로봇 + 보조 작업자 2명 → RB-Connect 도입 후 1명</span>
                    </div>
                    <div class="reference-item">
                        <span class="ref-label" data-i18n="roi.reference.production">생산량:</span>
                        <span class="ref-value" data-i18n="roi.reference.productionValue">1,000 joints / day, 250 days / year</span>
                    </div>
                    <div class="reference-item">
                        <span class="ref-label" data-i18n="roi.reference.defectRate">현재 불량률:</span>
                        <span class="ref-value" data-i18n="roi.reference.defectRateValue">2.0% → 도입 후 0.8%</span>
                    </div>
                    <div class="reference-item">
                        <span class="ref-label" data-i18n="roi.reference.rbConnect">RB-Connect:</span>
                        <span class="ref-value" data-i18n="roi.reference.rbConnectValue">라인당 연 3,600만 원 + 초기 3,000만 원 (3년 상각 기준)</span>
                    </div>
                    <div class="reference-highlight" data-i18n="roi.reference.highlight">
                        → Base case 기준: 약 4~6개월 내 투자 회수, 이후 연간 순효과 약 8천만 원/라인.
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/i18n.js"></script>
    <script src="js/main.js"></script>
    <script src="js/roi-simulator.js"></script>
</body>
</html>
